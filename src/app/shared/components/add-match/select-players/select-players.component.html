<div class="select-container" [formGroup]="matchForm">
  <ng-container *ngIf="!showingTeams" formGroupName="players">
    <ng-container *ngFor="let team of teams">
      <div
        class="select-player-team-container"
        [formGroupName]="team === 0 ? 'team1' : 'team2'">
        <mat-form-field>
          <mat-label>{{ 'common.player' | translate }}</mat-label>
          <mat-select
            id="{{ 2 * team }}"
            formControlName="one"
            [compareWith]="compareValues"
            (selectionChange)="updatePlayers($event)">
            <mat-option
              *ngFor="let player of getPlayersList(2 * team)"
              [value]="{ id: player.id, name: player.name }">
              {{ player.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field>
          <mat-label>{{ 'common.player' | translate }}</mat-label>
          <mat-select
            id="{{ 2 * team + 1 }}"
            formControlName="two"
            [compareWith]="compareValues"
            (selectionChange)="updatePlayers($event)">
            <mat-option
              *ngFor="let player of getPlayersList(2 * team + 1)"
              [value]="{ id: player.id, name: player.name }">
              {{ player.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>
  </ng-container>
</div>

<div class="select-container">
  <ng-container *ngIf="showingTeams">
    <ng-container *ngFor="let team of teams">
      <div class="select-team-container">
        <mat-form-field>
          <mat-label>{{ 'common.team' | translate }}</mat-label>
          <mat-select id="team" (selectionChange)="selectPlayer(team, $event)">
            <mat-option
              *ngFor="let player of players | async"
              [value]="{ id: player.id, name: player.name }">
              {{ player.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
    </ng-container>
  </ng-container>
</div>
